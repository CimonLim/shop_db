# #------------------------------------------------------------------------------
# # 파일 위치 설정
# #------------------------------------------------------------------------------
# data_directory = '/var/lib/postgresql/data'      # 데이터 저장 디렉토리
# hba_file = '/etc/postgresql/pg_hba.conf'        # 클라이언트 인증 설정 파일

# #------------------------------------------------------------------------------
# # 연결 및 인증
# #------------------------------------------------------------------------------
listen_addresses = '*'        # 수신할 IP 주소 (* = 모든 IP)
port = 5432                  # 데이터베이스 포트
max_connections = 100        # 최대 동시 연결 수
# ssl = on                     # SSL 사용 여부
# ssl_cert_file = '/etc/ssl/certs/ssl-cert-snakeoil.pem'  # SSL 인증서 경로

# #------------------------------------------------------------------------------
# # 메모리 설정
# #------------------------------------------------------------------------------
# shared_buffers = 2GB         # 공유 메모리 버퍼 크기 (RAM의 25% 권장)
# work_mem = 16MB             # 정렬 작업에 사용되는 메모리
# maintenance_work_mem = 256MB # VACUUM, CREATE INDEX 등의 유지보수 작업용 메모리
# effective_cache_size = 6GB   # OS 파일 시스템 캐시 예상 크기 (RAM의 50-75% 권장)

# #------------------------------------------------------------------------------
# # WAL (Write-Ahead Logging) 설정
# #------------------------------------------------------------------------------
# wal_level = replica          # WAL 상세도 (minimal, replica, logical)
# max_wal_size = 1GB          # WAL 파일의 최대 크기
# min_wal_size = 80MB         # WAL 파일의 최소 크기
# checkpoint_timeout = 5min    # 체크포인트 간 최대 시간

#------------------------------------------------------------------------------
# 쿼리 플래너 설정
#------------------------------------------------------------------------------
random_page_cost = 1.1       # SSD 사용시 1.1, HDD 사용시 4.0 권장
effective_io_concurrency = 200 # SSD 사용시 200, HDD 사용시 2 권장
default_statistics_target = 100 # 통계 수집 대상 수

#------------------------------------------------------------------------------
# 로깅 설정
#------------------------------------------------------------------------------
log_destination = 'stderr'   # 로그 출력 대상
logging_collector = on       # 로그 수집기 활성화
log_directory = 'log'        # 로그 저장 디렉토리
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log' # 로그 파일명 형식
log_min_duration_statement = 1000  # 1초 이상 걸리는 쿼리 로깅 (ms)
log_checkpoints = on         # 체크포인트 로깅
log_connections = on         # 연결 시도 로깅
log_disconnections = on      # 연결 종료 로깅

#------------------------------------------------------------------------------
# 자동 VACUUM 설정
#------------------------------------------------------------------------------
autovacuum = on             # 자동 VACUUM 활성화
autovacuum_max_workers = 3   # 동시 실행 가능한 autovacuum 작업자 수
autovacuum_naptime = 1min   # autovacuum 실행 간격
